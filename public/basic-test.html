<!DOCTYPE html>
<html>
  <head>
    <title>Basic Notification Test</title>
    <link rel="stylesheet" href="/public/css/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Minimal header structure -->
    <header class="header">
      <h1 class="header-title">Basic Test</h1>
      <div class="header-actions">
        <div class="font-controls">
          <button>Font Controls</button>
        </div>
      </div>
    </header>

    <!-- Notification container -->
    <div id="notificationContainer" class="notification-container"></div>

    <div style="margin: 20px">
      <h2>Basic Notification Test</h2>
      <button onclick="testBasicNotification()">Test Basic Notification</button>
      <button onclick="testCSSNotification()">Test CSS Notification</button>
      <button onclick="testBellCreation()">Test Bell Creation</button>

      <div
        id="results"
        style="
          margin-top: 20px;
          font-family: monospace;
          background: #f5f5f5;
          padding: 10px;
        "
      ></div>
    </div>

    <script>
      function log(message) {
        const results = document.getElementById("results");
        results.innerHTML += "<div>" + message + "</div>";
        logger.info(message);
      }

      function testBasicNotification() {
        log("Testing basic notification...");
        const container = document.getElementById("notificationContainer");
        log("Container found: " + !!container);

        if (container) {
          const notification = document.createElement("div");
          notification.className = "notification notification-success show";
          notification.innerHTML = `
                    <div class="notification-content">
                        <i class="fas fa-check-circle"></i>
                        <div class="notification-text">
                            <span class="notification-message">Basic test notification!</span>
                        </div>
                    </div>
                `;

          container.appendChild(notification);
          log("Notification added to container");

          setTimeout(() => {
            if (notification.parentElement) {
              notification.remove();
              log("Notification removed");
            }
          }, 3000);
        }
      }

      function testCSSNotification() {
        log("Testing CSS notification...");
        const notification = document.createElement("div");
        notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 10000;
                background: #28a745; color: white; padding: 15px 20px;
                border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                font-family: Arial, sans-serif;
            `;
        notification.textContent = "CSS Test Notification";
        document.body.appendChild(notification);
        log("CSS notification added");

        setTimeout(() => {
          if (notification.parentElement) {
            notification.remove();
            log("CSS notification removed");
          }
        }, 3000);
      }

      function testBellCreation() {
        log("Testing bell creation...");
        const headerActions = document.querySelector(".header-actions");
        log("Header actions found: " + !!headerActions);

        if (headerActions) {
          // Remove existing bell if any
          const existing = document.querySelector(
            ".notification-bell-container"
          );
          if (existing) {
            existing.remove();
            log("Removed existing bell");
          }

          const bellContainer = document.createElement("div");
          bellContainer.className = "notification-bell-container";
          bellContainer.innerHTML = `
                    <button id="notification-bell" class="notification-bell-btn" title="Notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notification-badge" style="display: none;">0</span>
                    </button>
                `;

          const fontControls = headerActions.querySelector(".font-controls");
          if (fontControls) {
            headerActions.insertBefore(bellContainer, fontControls);
            log("Bell inserted before font controls");
          } else {
            headerActions.appendChild(bellContainer);
            log("Bell appended to header actions");
          }

          const bellIcon = document.getElementById("notification-bell");
          log("Bell icon created: " + !!bellIcon);

          if (bellIcon) {
            bellIcon.addEventListener("click", () => {
              log("Bell icon clicked!");
              alert("Bell icon works!");
            });
          }
        }
      }

      // Auto-run tests
      setTimeout(() => {
        log("=== AUTO TESTS ===");
        testBellCreation();
      }, 1000);
    </script>
  </body>
</html>
